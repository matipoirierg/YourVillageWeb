"use strict";var gradx;void 0===jQuery.fn.draggable&&(jQuery.fn.draggable=function(){var e=document.getElementById(this.attr("id"));return e.style.top="88px",Drag.init(e,null,26,435,86,86),this});var gradX=function(e,r){var a={targets:[],sliders:[],direction:"left",type:"linear",code_shown:!1,change:function(e,r){}};for(var d in(gradx={rand_RGB:[],rand_pos:[],id:null,slider_ids:[],slider_index:0,sliders:[],direction:"left",type:"linear",shape:"cover",slider_hovered:[],jQ_present:!0,code_shown:!1,load_jQ:function(){this.gx=jQuery},add_event:function(e,r,a){var d,t,i;t=r,i=a,(d=e).attachEvent?d.attachEvent("on"+t,function(){i.call(d)}):d.addEventListener&&d.addEventListener(t,i,!1)},get_random_position:function(){var e;do{e=parseInt(100*Math.random())}while(this.rand_pos.indexOf(e)>-1);return this.rand_pos.push(e),e},get_random_rgb:function(){var e;do{e="rgb("+parseInt(255*Math.random())+", "+parseInt(255*Math.random())+", "+parseInt(255*Math.random())+")"}while(this.rand_RGB.indexOf(e)>-1);return this.rand_RGB.push(e),e},update_target:function(e){if(this.targets.length>0){var r,a,d,t=this.targets.length,i=e.length;for(r=0;r<t;r++)for(d=gradx.gx(this.targets[r]),a=0;a<i;a++)d.css("background-image",e[a])}},apply_style:function(e,r){var a="linear";if("linear"!=gradx.type&&(a="radial"),r.indexOf(this.direction)>-1)var d=["-webkit-"+a+"-gradient("+r+")","-moz-"+a+"-gradient("+r+")","-ms-"+a+"-gradient("+r+")","-o-"+a+"-gradient("+r+")",a+"-gradient("+r+")"];else d=[r];for(var t=d.length,i="";t>0;)t--,e.css("background",d[t]),i+="background: "+d[t]+";\n";this.change(this.sliders,d),this.update_target(d),gradx.gx("#gradx_code").html(i),this.update_canvas(r)},update_canvas:function(e){var r=document.querySelector("#gradient-reference"),a=r.getContext("2d"),d=r.getBoundingClientRect(),t=d.width,i=d.height,s=e.split(" , ");s.length>1&&s.shift();var n,g=s.length,o=a.createLinearGradient(0,0,t,0),l=[];for(n=0;n<g;n++){-1==s[n].lastIndexOf("%")&&(s[n]+=" 0%");var x=s[n].lastIndexOf(" "),_=s[n].slice(x).replace("%",""),c=_/100,p=s[n].substr(0,x);o.addColorStop(c,p),l[n]={color:p,position:_}}a.fillStyle=o,a.fillRect(0,0,t,i),r.dispatchEvent(new Event("canvas_updated")),saveCookie("gradient-data",l)},apply_default_styles:function(){this.update_style_array();var e=this.get_style_value();this.apply_style(this.panel,e)},update_style_array:function(){this.sliders=[];var e,r,a,d,t=gradx.slider_ids.length;for(e=0;e<t;e++)d="#"+gradx.slider_ids[e],r=parseInt(gradx.gx(d).css("left")),a=parseInt(r/gradx.container_width*100),a-=6,gradx.sliders.push([gradx.gx(d).css("background-color"),a]);this.sliders.sort(function(e,r){return e[1]>r[1]?1:-1})},get_style_value:function(){var e=gradx.slider_ids.length;if(1===e)r=this.sliders[0][0];else{for(var r="",a="",d=0;d<e;d++)""==this.sliders[d][1]?r+=a+this.sliders[d][0]:(this.sliders[d][1]>100&&(this.sliders[d][1]=100),r+=a+(this.sliders[d][0]+" ")+this.sliders[d][1]+"%"),a=" , ";r="linear"==this.type?this.direction+" , "+r:this.direction+" , "+this.type+" "+this.shape+" , "+r}return r},get_rgb_obj:function(e){return e=(e=(e=e.split("("))[1]).split(","),{r:parseInt(e[0]),g:parseInt(e[1]),b:parseInt(e[2])}},load_info:function(e){var r="#"+e.id;if(this.current_slider_id=r,this.slider_ids.indexOf(e.id)>-1){var a=gradx.gx(r).css("backgroundColor"),d=this.get_rgb_obj(a),t=gradx.gx(r).css("left");parseInt(t)>25&&parseInt(t)<438&&gradx.gx("#gradx_slider_info").css("left",t).show(),this.set_colorpicker(d)}},add_slider:function(e){var r,a,d,t;0===e.length&&(e=[{color:gradx.get_random_rgb(),position:gradx.get_random_position()},{color:gradx.get_random_rgb(),position:gradx.get_random_position()}]);var i=e;for(d in i){if(void 0===i[d].position)break;t=parseInt(i[d].position*this.container_width/100)+26+"px",r="gradx_slider_"+this.slider_index,this.sliders.push([i[d].color,i[d].position]),this.slider_ids.push(r),a="<div class='gradx_slider' id='"+r+"'></div>",gradx.gx("#gradx_start_sliders_"+this.id).append(a),gradx.gx("#"+r).css("backgroundColor",i[d].color).css("left",t),this.slider_index++}for(var s=0,n=this.slider_ids.length;s<n;s++)gradx.gx("#"+this.slider_ids[s]).draggable({containment:"parent",axis:"x",start:function(){gradx.jQ_present&&(gradx.current_slider_id="#"+gradx.gx(this).attr("id"))},drag:function(){gradx.update_style_array(),gradx.apply_style(gradx.panel,gradx.get_style_value());var e=gradx.gx(gradx.current_slider_id).css("left");parseInt(e)>25&&parseInt(e)<438&&gradx.gx("#gradx_slider_info").css("left",e).show();var r=gradx.gx(gradx.current_slider_id).css("backgroundColor"),a=gradx.get_rgb_obj(r);gradx.cp.spectrum("set",a)}}).click(function(){return gradx.load_info(this),!1})},set_colorpicker:function(e){gradx.cp.spectrum({move:function(e){if(0!=gradx.current_slider_id){var r=e.toRgbString();gradx.gx(gradx.current_slider_id).css("background-color",r),gradx.update_style_array(),gradx.apply_style(gradx.panel,gradx.get_style_value())}},change:function(){gradx.gx("#gradx_slider_info").hide()},flat:!0,showAlpha:!1,color:e,clickoutFiresChange:!0,preferredFormat:"hex",showInput:!0,showButtons:!1,showPalette:!0,showPaletteOnly:!1,showSelectionPalette:!1,hideAfterPaletteSelect:!1,palette:["ffffff","aaaaaa","555555","000000","ffff55","ffaa00","ff5555","aa0000","55ff55","00aa00","55ffff","00aaaa","5555ff","0000aa","ff55ff","aa00aa"]})},generate_options:function(e){for(var r,a,d=e.length,t="",i=0;i<d;i++)r=(r=e[i].split(" "))[0],a=i<2?r[1]:"",r=r.replace("-"," "),t+="<option value="+e[i]+" "+a+">"+r+"</option>";return t},generate_radial_options:function(){var e;e=["horizontal-center disabled","center selected","left","right"],gradx.gx("#gradx_gradient_subtype").html(gradx.generate_options(e)),e=["vertical-center disabled","center selected","top","bottom"],gradx.gx("#gradx_gradient_subtype2").html(gradx.generate_options(e)).show()},generate_linear_options:function(){var e;e=["horizontal-center disabled","left selected","right","top","bottom"],gradx.gx("#gradx_gradient_subtype").html(gradx.generate_options(e)),gradx.gx("#gradx_gradient_subtype2").hide()},destroy:function(){var e={targets:[],sliders:[],direction:"left",type:"linear",code_shown:!1,change:function(e,r){}};for(var r in e)gradx[r]=e[r]},load_gradx:function(e,r){this.me=gradx.gx(e),this.id=e.replace("#",""),e=this.id,this.current_slider_id=!1;var a="<div class='gradx'>\n                        <div class='gradx_slectboxes'>\n                        <select id='gradx_gradient_type' class='gradx_gradient_type'>\n                            <option value='linear'>Linear</option>\n                            <option value='circle'>Radial - Circle</option>\n                            <option value='ellipse'>Radial - Ellipse</option>\n                        </select>\n                        <select id='gradx_gradient_subtype' class='gradx_gradient_type'>\n                            <option id='gradx_gradient_subtype_desc' value='gradient-direction' disabled>gradient direction</option>\n                            <option value='left' selected>Left</option>\n                            <option value='right'>Right</option>\n                            <option value='top'>Top</option>\n                            <option value='bottom'>Bottom</option>\n                        </select>\n                        <select id='gradx_gradient_subtype2' class='gradx_gradient_type gradx_hide'>\n                        </select>\n                        <select id='gradx_radial_gradient_size' class='gradx_gradient_type gradx_hide'>\n                        </select>\n                        </div>\n                        <div class='gradx_container' id='gradx_"+e+"'>\n                            <div id='gradx_stop_sliders_"+e+"'></div>\n                            <div class='gradx_panel' id='gradx_panel_"+e+"'></div>\n                            <div class='gradx_start_sliders' id='gradx_start_sliders_"+e+"'>\n                                <div class='cp-default' id='gradx_slider_info'>\n                                    <div id='gradx_slider_controls'>\n                                        <div id='gradx_delete_slider' class='gradx_btn'><i class='icon icon-remove'></i>delete</div>\n                                    </div>\n                                    <div id='gradx_slider_content'></div>\n                                </div> \n                            </div>\n                        </div>\n                        <div id='gradx_reset' class='gradx_reset gradx_btn'>Reset</div>\n                        <div id='gradx_add_slider' class='gradx_add_slider gradx_btn'><i class='icon icon-add'></i></div>\n                        <div id='gradx_show_code' class='gradx_show_code gradx_btn'><i class='icon icon-file-css'></i><span>show the code</span></div>\n                        <div id='gradx_show_presets' style='display:none' class='gradx_show_presets gradx_btn'><i class='icon icon-preset'></i><span>show presets</span></div>\n                        <textarea class='gradx_code' id='gradx_code'></textarea>\n                    </div>";this.me.html(a);var d;if(d=gradx.generate_options(["gradient-size disabled","closest-side selected","closest-corner","farthest-side","farthest-corner","contain","cover"]),gradx.gx("#gradx_radial_gradient_size").html(d),this.container=gradx.gx("#gradx_"+e),this.panel=gradx.gx("#gradx_panel_"+e),this.container_width=410,this.add_slider(r),gradx.add_event(document,"click",function(){if(!gradx.slider_hovered[e])return gradx.gx("#gradx_slider_info").hide(),!1}),gradx.gx("#gradx_add_slider").click(function(){gradx.get_random_rgb(),gradx.get_random_position();gradx.add_slider([{color:"rgb(255, 255, 255)",position:50}]),gradx.update_style_array(),gradx.apply_style(gradx.panel,gradx.get_style_value())}),gradx.cp=gradx.gx("#gradx_slider_content"),gradx.set_colorpicker("blue"),gradx.gx("#gradx_delete_slider").click(function(){gradx.gx(gradx.current_slider_id).remove(),gradx.gx("#gradx_slider_info").hide();for(var e=gradx.current_slider_id.replace("#",""),r=0;r<gradx.slider_ids.length;r++)gradx.slider_ids[r]==e&&gradx.slider_ids.splice(r,1);gradx.update_style_array(),gradx.apply_style(gradx.panel,gradx.get_style_value()),gradx.current_slider_id=!1}),gradx.gx("#gradx_reset").click(function(){gradX("#gradX",{sliders:defaultColors})}),gradx.gx("#gradx_code").focus(function(){var e=gradx.gx(this);e.select(),e.mouseup(function(){return e.unbind("mouseup"),!1})}),gradx.gx("#gradx_gradient_type").change(function(){var e=gradx.gx(this).val();"linear"!==e?gradx.generate_radial_options():(gradx.generate_linear_options(),gradx.gx("#gradx_gradient_subtype").val("left")),gradx.type=e,gradx.direction=gradx.gx("#gradx_gradient_subtype").val(),gradx.apply_style(gradx.panel,gradx.get_style_value())}),"linear"!==this.type){var t;if(gradx.gx("#gradx_gradient_type").val(this.type),gradx.generate_radial_options(),"left"!==this.direction)i=(t=this.direction.indexOf(",")>-1?this.direction.split(","):this.direction.split(" "))[0],s=t[1],gradx.gx("#gradx_gradient_subtype").val(i),gradx.gx("#gradx_gradient_subtype2").val(s);else var i=gradx.gx("#gradx_gradient_subtype").val(),s=gradx.gx("#gradx_gradient_subtype2").val();gradx.direction=i+" "+s,gradx.apply_style(gradx.panel,gradx.get_style_value())}else"left"!==this.direction&&gradx.gx("#gradx_gradient_subtype").val(this.direction);gradx.gx("#gradx_gradient_subtype").change(function(){if("linear"===gradx.type)gradx.direction=gradx.gx(this).val();else{var e=gradx.gx(this).val(),r=gradx.gx("#gradx_gradient_subtype2").val();gradx.direction=e+" "+r}gradx.apply_style(gradx.panel,gradx.get_style_value())}),gradx.gx("#gradx_gradient_subtype2").change(function(){var e=gradx.gx("#gradx_gradient_subtype").val(),r=gradx.gx(this).val();gradx.direction=e+" "+r,gradx.apply_style(gradx.panel,gradx.get_style_value())}),gradx.gx("#gradx_radial_gradient_size").change(function(){gradx.shape=gradx.gx(this).val(),gradx.apply_style(gradx.panel,gradx.get_style_value())}),gradx.gx("#gradx_show_code").click(function(){gradx.code_shown?(gradx.code_shown=!1,gradx.gx("#gradx_show_code span").text("show the code"),gradx.gx("#gradx_code").hide()):(gradx.gx("#gradx_show_code span").text("hide the code"),gradx.gx("#gradx_code").show(),gradx.code_shown=!0)}),gradx.code_shown&&(gradx.gx("#gradx_show_code span").text("hide the code"),gradx.gx("#gradx_code").show()),gradx.add_event(document.getElementById("gradx_slider_info"),"mouseout",function(){gradx.slider_hovered[e]=!1}),gradx.add_event(document.getElementById("gradx_slider_info"),"mouseover",function(){gradx.slider_hovered[e]=!0})}}).load_jQ(),gradx.gx.extend(a,r),a)gradx[d]=a[d];gradx.load_gradx(e,gradx.sliders),gradx.apply_default_styles()};